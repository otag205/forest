<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå≤ –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ –ª–µ—Å—É</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            background: #1f3b2c;
            background-image: 
                radial-gradient(circle at 10% 20%, #2e5d47 8%, transparent 25%),
                radial-gradient(circle at 90% 80%, #3b6e54 10%, transparent 30%),
                linear-gradient(145deg, #1e4f38 0%, #0e3121 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', 'Courier New', monospace;
            padding: 16px;
            position: relative;
            overflow-x: hidden;
        }

        /* –ü–∞–¥–∞—é—â–∏–µ –ª–∏—Å—Ç—å—è (–¥–µ–∫–æ—Ä) */
        body::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" opacity="0.1"><path d="M50 30 L60 10 L70 30 L80 15 L90 35 L85 50 L70 45 L60 70 L50 45 L35 55 L50 30" fill="%23b5d38b" /><circle cx="130" cy="70" r="8" fill="%23d4b48c" /><path d="M160 120 L170 100 L180 120 L175 140 L160 130 L145 140 L140 120 L155 110 L160 120" fill="%23c2a15a" /></svg>') repeat;
            pointer-events: none;
            animation: leafFall 200s linear infinite;
        }

        @keyframes leafFall {
            from { background-position: 0 0; }
            to { background-position: 1000px 1000px; }
        }

        .game-container {
            max-width: 750px;
            width: 100%;
            background: rgba(30, 52, 35, 0.9);
            backdrop-filter: blur(4px);
            border-radius: 60px 60px 30px 30px;
            box-shadow: 0 30px 40px rgba(0, 0, 0, 0.7), inset 0 1px 8px rgba(255, 255, 200, 0.4);
            border: 4px solid #8b6f42;
            padding: 28px 24px 35px;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .game-container::after {
            content: '';
            position: absolute;
            top: 10px; left: 20px; right: 20px; bottom: 10px;
            border: 2px dashed #6b8c4a;
            border-radius: 50px;
            opacity: 0.2;
            pointer-events: none;
        }

        h1 {
            text-align: center;
            margin: 0 0 18px 0;
            font-size: 3rem;
            font-weight: 800;
            color: #f7e9c3;
            text-shadow: 5px 5px 0 #3d643d, 7px 7px 0 #1e3f1e, 2px 2px 10px #a5c874;
            letter-spacing: 5px;
            word-break: break-word;
            animation: glow 4s infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 5px 5px 0 #3d643d, 7px 7px 0 #1e3f1e, 0 0 10px #b9d38b; }
            to { text-shadow: 6px 6px 0 #4e7a4e, 9px 9px 0 #2b512b, 0 0 20px #e5ffb0; }
        }

        .stats-panel {
            background: #2b4d33;
            border: 5px solid #7b5f3a;
            border-radius: 70px 70px 35px 35px;
            padding: 22px 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px 40px;
            box-shadow: inset 0 -5px 12px #1a351f, 0 12px 0 #3b2e1b, 0 10px 20px black;
            margin-bottom: 35px;
        }

        .stat {
            background: #3b6040;
            border-radius: 60px;
            padding: 15px 35px;
            min-width: 160px;
            text-align: center;
            font-weight: bold;
            font-size: 1.7rem;
            color: #fefae0;
            border: 3px solid #cbae7a;
            box-shadow: inset 0 -3px 8px #253d28, 0 6px 0 #4a3922, 0 8px 12px #1f2e1a;
            text-shadow: 2px 2px 0 #1f421f;
            transition: transform 0.2s;
        }

        .stat:hover {
            transform: scale(1.02);
        }

        .stat span {
            display: block;
            font-size: 2.5rem;
            color: #feeea2;
            line-height: 1.2;
            filter: drop-shadow(0 0 4px #90aa60);
        }

        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .btn {
            background: #7d663c;
            border: none;
            border-bottom: 8px solid #4a3a22;
            border-radius: 60px;
            padding: 20px 8px;
            font-size: 2rem;
            font-weight: bold;
            color: #fcf1cf;
            text-shadow: 3px 3px 0 #3c6030;
            cursor: pointer;
            transition: all 0.1s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            box-shadow: 0 8px 0 #3b2e1a, 0 12px 18px black;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: -30%; left: -30%;
            width: 160%; height: 160%;
            background: radial-gradient(circle, rgba(255,255,200,0.3) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:hover {
            background: #8f7648;
            transform: translateY(-4px);
            border-bottom-width: 10px;
        }

        .btn:active {
            transform: translateY(6px);
            border-bottom-width: 4px;
            box-shadow: 0 4px 0 #3b2e1a;
        }

        .btn:disabled {
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(0.7);
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        .log {
            background: #1f3d28;
            border: 5px solid #6b4f2b;
            border-radius: 40px 40px 25px 25px;
            padding: 20px 18px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 1.25rem;
            color: #e2f0d0;
            box-shadow: inset 0 0 30px #0c1f12, 0 8px 0 #3b2e1b;
            scroll-behavior: smooth;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .log p {
            margin: 8px 0;
            border-left: 6px solid #b5975a;
            padding-left: 16px;
            background: rgba(20, 45, 25, 0.7);
            border-radius: 0 30px 30px 0;
            backdrop-filter: blur(2px);
            animation: fadeIn 0.3s ease-out;
            word-break: break-word;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .log p:first-child {
            margin-top: 0;
        }

        .log p:last-child {
            margin-bottom: 0;
        }

        /* –ö—Ä–∞—Å–∏–≤—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        .log::-webkit-scrollbar {
            width: 12px;
        }

        .log::-webkit-scrollbar-track {
            background: #2a4a2a;
            border-radius: 20px;
        }

        .log::-webkit-scrollbar-thumb {
            background: #7b8f5a;
            border-radius: 20px;
            border: 2px solid #4d6b3a;
        }

        .difficulty-screen {
            background: #21412b;
            border: 8px solid #8b6f42;
            border-radius: 70px;
            padding: 40px 25px;
            text-align: center;
            box-shadow: inset 0 0 40px #15331c, 0 18px 0 #4d3a20, 0 20px 30px black;
        }

        .difficulty-screen h2 {
            font-size: 3rem;
            color: #ffeecc;
            text-shadow: 4px 4px 0 #42633b, 6px 6px 0 #284e28;
            margin-top: 0;
            margin-bottom: 35px;
            letter-spacing: 3px;
        }

        .difficulty-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .difficulty-btn {
            background: #5e7a4b;
            border: 6px solid #dbbd87;
            border-bottom: 12px solid #3f592b;
            font-size: 2.2rem;
            padding: 25px 35px;
            border-radius: 100px;
            color: #fff2d2;
            font-weight: bold;
            cursor: pointer;
            transition: 0.1s ease;
            box-shadow: 0 10px 0 #2b4020, 0 12px 20px black;
            flex: 0 1 auto;
            min-width: 220px;
            text-shadow: 3px 3px 0 #2e522e;
        }

        .difficulty-btn:hover {
            background: #718e5b;
            border-bottom-width: 14px;
            transform: translateY(-4px);
        }

        .difficulty-btn:active {
            transform: translateY(6px);
            border-bottom-width: 6px;
        }

        .hidden {
            display: none;
        }

        .restart-btn {
            background: #3e2b15;
            color: #f8e7bc;
            border: 4px solid #b18b4b;
            border-bottom: 8px solid #2f1f0e;
            font-size: 1.8rem;
            padding: 15px 30px;
            border-radius: 60px;
            margin-top: 20px;
            width: 100%;
            cursor: pointer;
            transition: 0.1s;
            font-weight: bold;
            letter-spacing: 2px;
            box-shadow: 0 8px 0 #2f1f0e, 0 8px 16px black;
        }

        .restart-btn:hover {
            background: #5c401f;
            transform: translateY(-2px);
            border-bottom-width: 10px;
        }

        .restart-btn:active {
            transform: translateY(4px);
            border-bottom-width: 4px;
        }

        .footer {
            color: #bccc94;
            text-align: center;
            margin-top: 25px;
            font-size: 1.3rem;
            text-shadow: 2px 2px 0 #1f451f;
            background: rgba(30, 50, 30, 0.5);
            padding: 10px;
            border-radius: 40px;
            border: 1px solid #7f9a6b;
        }
    </style>
</head>
<body>
    <div class="game-container" id="gameContainer">
        <!-- –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
        <div id="difficultyScreen" class="difficulty-screen">
            <h2>üåø –í—ã–±–µ—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å üåø</h2>
            <div class="difficulty-buttons">
                <div class="difficulty-btn" data-diff="–ª–µ–≥–∫–æ">üçÉ –õ–ï–ì–ö–û</div>
                <div class="difficulty-btn" data-diff="—Å—Ä–µ–¥–Ω–µ">üå≥ –°–†–ï–î–ù–ï</div>
                <div class="difficulty-btn" data-diff="—Å–ª–æ–∂–Ω–æ">üå≤ –°–õ–û–ñ–ù–û</div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div id="gameScreen" class="hidden">
            <h1>üå≤ –í–´–ñ–ò–í–ê–ù–ò–ï üå≤</h1>

            <div class="stats-panel">
                <div class="stat">‚ö° –≠–Ω–µ—Ä–≥–∏—è<span id="energy">10</span></div>
                <div class="stat">üìÜ –•–æ–¥<span id="turn">1</span></div>
            </div>

            <div class="actions">
                <button class="btn" id="actionWalk">üö∂ –ò–¥—Ç–∏</button>
                <button class="btn" id="actionRest">üò¥ –û—Ç–¥—ã—Ö–∞—Ç—å</button>
                <button class="btn" id="actionRun">üèÉ –ë–µ–∂–∞—Ç—å</button>
                <button class="btn" id="actionStatus">üìã –°—Ç–∞—Ç—É—Å</button>
            </div>

            <div class="log" id="log">
                <p>üå± –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–µ—Å...</p>
            </div>

            <button class="restart-btn" id="restartBtn">üîÑ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
            <div class="footer">‚ö° –¶–µ–ª—å: —ç–Ω–µ—Ä–≥–∏—è >20, —à–∞–≥–∏ ‚â•10, –ø—Ä–æ–±–µ–∂–∫–∏ ‚â•5</div>
        </div>
    </div>

    <script>
        (function() {
            // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            let energy = 10;
            let steps = 0;
            let run = 0;
            let hod = 1;
            let gameActive = false;

            // –≠–ª–µ–º–µ–Ω—Ç—ã
            const diffScreen = document.getElementById('difficultyScreen');
            const gameScreen = document.getElementById('gameScreen');
            const energySpan = document.getElementById('energy');
            const turnSpan = document.getElementById('turn');
            const logDiv = document.getElementById('log');
            const actionWalk = document.getElementById('actionWalk');
            const actionRest = document.getElementById('actionRest');
            const actionRun = document.getElementById('actionRun');
            const actionStatus = document.getElementById('actionStatus');
            const restartBtn = document.getElementById('restartBtn');

            const loot = ["—è–≥–æ–¥—ã +3", "–æ—Ä–µ—à–∫–∏ +2", "–º–æ—Ö +1", "–Ω–∏—á–µ–≥–æ"];

            function addLog(msg) {
                const p = document.createElement('p');
                p.textContent = msg;
                logDiv.appendChild(p);
                logDiv.scrollTop = logDiv.scrollHeight;
                if (logDiv.children.length > 30) {
                    logDiv.removeChild(logDiv.children[0]);
                }
            }

            function clearLog() {
                logDiv.innerHTML = '';
                addLog('üå± –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–µ—Å...');
            }

            function updateUI() {
                energySpan.textContent = energy;
                turnSpan.textContent = hod;
            }

            function checkWin() {
                return energy > 20 && steps >= 10 && run >= 5;
            }

            function checkLoss() {
                return energy <= 0;
            }

            function setButtonsActive(active) {
                actionWalk.disabled = !active;
                actionRest.disabled = !active;
                actionRun.disabled = !active;
                actionStatus.disabled = !active;
            }

            function endGame(win) {
                gameActive = false;
                setButtonsActive(false);
                if (win) addLog('üéâ –í—ã —Å–º–æ–≥–ª–∏ –ø—Ä–æ–∂–∏—Ç—å –¥–µ–Ω—å!');
                else addLog('üíî –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏...');
            }

            // ---- –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–¥–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π: —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∑–∞ —Ö–æ–¥ ----
            function performAction(actionNumber) {
                if (!gameActive) return;

                addLog(`‚ûñ‚ûñ –•–æ–¥ ${hod} ‚ûñ‚ûñ`);

                let rareEventHappened = false; // —Ñ–ª–∞–≥, —á—Ç–æ —Ä–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ —ç—Ç–æ–º —Ö–æ–¥—É

                if (actionNumber === 1) { // –ò–¥—Ç–∏
                    energy -= 1;
                    steps += 1;
                    addLog("üö∂ –í—ã –ø–æ—à–ª–∏ –¥–∞–ª—å—à–µ -1");

                    // –æ–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (1/5)
                    const chance = Math.floor(Math.random() * 5) + 1;
                    if (chance === 1) {
                        energy -= 1;
                        addLog("üòñ –í—ã —Å–ø–æ—Ç–∫–Ω—É–ª–∏—Å—å -1");
                    } else if (chance === 5) {
                        energy += 2;
                        addLog("üçÄ –í—ã –ø–æ—Ö–æ–¥–∏–ª–∏ –ø–æ –º—è–≥–∫–æ–º—É –º—Ö—É +2");
                    } else if (chance === 3) {
                        energy += 1;
                        addLog("üå§Ô∏è –í—ã –ø—Ä–æ—à–ª–∏—Å—å –ø–æ —Ç–µ–Ω—ë—á–∫—É +1");
                    } else if (chance === 4) {
                        energy -= 5;
                        addLog("üíß –í—ã –Ω–∞—Å—Ç—É–ø–∏–ª–∏ –≤ –≥–ª—É–±–æ–∫—É—é –ª—É–∂—É -5");
                    }

                    // —Ä–µ–¥–∫–∏–µ —Å–æ–±—ã—Ç–∏—è —Ö–æ–¥—å–±—ã (—Ç–µ–ø–µ—Ä—å –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ)
                    const rareWalk = Math.floor(Math.random() * 10) + 1; // 1-10
                    if (rareWalk === 5) {
                        energy -= 7;
                        addLog("‚ö†Ô∏è –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í—ã –ø–æ–ø–∞–ª–∏ –≤ —á—å—é-—Ç–æ –ª–æ–≤—É—à–∫—É -7");
                        rareEventHappened = true;
                    } else if (rareWalk === 6) {
                        energy += 7;
                        addLog("üßë‚Äçü¶Ø –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í—ã –Ω–∞—à–ª–∏ —Ç—Ä–æ—Å—Ç—å, —Å –Ω–µ–π —Ö–æ–¥–∏—Ç—å –±—É–¥–µ—Ç –ø—Ä–æ—â–µ +7");
                        rareEventHappened = true;
                    }

                } else if (actionNumber === 2) { // –û—Ç–¥—ã—Ö–∞—Ç—å
                    energy += 2;
                    addLog("üòå –í—ã –æ—Ç–¥—ã—Ö–∞–µ—Ç–µ +2");

                    const chance = Math.floor(Math.random() * 5) + 1;
                    if (chance === 1) {
                        energy -= 6;
                        addLog("üêù –í–∞—Å —É–∂–∞–ª–∏–ª–∞ –ø—á–µ–ª–∞ -6");
                    } else if (chance === 5) {
                        energy += 2;
                        addLog("üêøÔ∏è –ë–µ–ª–æ—á–∫–∞ –ø–æ–¥–µ–ª–∏–ª–∞—Å—å —Å –≤–∞–º–∏ –æ—Ä–µ—à–∫–∞–º–∏ +2");
                    } else if (chance === 3) {
                        energy += 1;
                        addLog("üçÇ –í—ã –Ω–∞—à–ª–∏ —Ö–æ—Ä–æ—à–µ–µ –º–µ—Å—Ç–µ—á–∫–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞ +1");
                    } else if (chance === 4) {
                        energy -= 3;
                        addLog("üî• –ë—ã–ª–æ —Å–ª–∏—à–∫–æ–º –∂–∞—Ä–∫–æ –∏ –≤—ã –Ω–µ —Å–º–æ–≥–ª–∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å -3");
                    }

                } else if (actionNumber === 3) { // –ë–µ–∂–∞—Ç—å
                    energy -= 3;
                    run += 1;
                    addLog("üèÉ –í—ã –±–µ–∂–∏—Ç–µ -3");

                    const chance = Math.floor(Math.random() * 5) + 1;
                    if (chance === 1) {
                        energy -= 3;
                        addLog("üò´ –í—ã —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª–∏ -3");
                    } else if (chance === 5) {
                        energy += 6;
                        addLog("üí™ –í—ã –≤–∑–±–æ–¥—Ä–∏–ª–∏—Å—å –∏ –≤–∞–º —Å—Ç–∞–ª–æ —Ö–æ—Ä–æ—à–æ +6");
                    } else if (chance === 3) {
                        energy += 10;
                        addLog("üçì –í—ã –ø–æ—Ç–æ—Ä–æ–ø–∏–ª–∏—Å—å –∏ –Ω–∞—à–ª–∏ —è–≥–æ–¥—ã –±—ã—Å—Ç—Ä–µ–µ –º–µ–¥–≤–µ–¥—è +10");
                    } else if (chance === 4) {
                        energy -= 7;
                        addLog("üê∫ –ü–æ–∫–∞ –±–µ–∂–∞–ª–∏ –≤—ã —Å–∏–ª—å–Ω–æ —à—É–º–µ–ª–∏ –∏ –≤–æ–ª–∫ –≤–∞—Å –Ω–∞—à—ë–ª -7");
                    }

                    // —Ä–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ –±–µ–≥–∞
                    const rareRun = Math.floor(Math.random() * 10) + 1;
                    if (rareRun === 7) {
                        energy -= 15;
                        addLog("üê∫üê∫ –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í–∞—Å –æ–∫—Ä—É–∂–∏–ª–∞ —Å—Ç–∞—è –≤–æ–ª–∫–æ–≤ -15");
                        rareEventHappened = true;
                    }

                } else if (actionNumber === 4) { // –°—Ç–∞—Ç—É—Å
                    energy -= 1;
                    addLog("üìä –°—Ç–∞—Ç—É—Å:");
                    addLog(`   –®–∞–≥–æ–≤ —Å–¥–µ–ª–∞–Ω–æ: ${steps}, –ü—Ä–æ–±–µ–∂–µ–∫: ${run}`);
                    addLog("üò¥ –ü–æ–∫–∞ –≤—ã –¥—É–º–∞–ª–∏, —á—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è, –≤—ã —É—Å—Ç–∞–ª–∏ -1");
                }

                // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ä–µ–¥–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (1/15 –∫–∞–∂–¥–æ–µ) ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â—ë –Ω–µ –±—ã–ª–æ —Ä–µ–¥–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤ —ç—Ç–æ–º —Ö–æ–¥—É
                if (!rareEventHappened) {
                    const globalRare = Math.floor(Math.random() * 15) + 1; // 1-15
                    if (globalRare === 1) {
                        energy += 5;
                        addLog("üåü –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í—ã –Ω–∞—à–ª–∏ –ø–∏—Ä–æ–≥ +5 —ç–Ω–µ—Ä–≥–∏–∏");
                    } else if (globalRare === 2) {
                        energy -= 10;
                        addLog("üêª –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏ –º–µ–¥–≤–µ–¥—è -10");
                    } else if (globalRare === 3) {
                        energy += 2;
                        addLog("üçé –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í—ã –Ω–∞—à–ª–∏ –Ω–∞ —Ä–µ–¥–∫–æ—Å—Ç—å –≤–∫—É—Å–Ω–æ–µ —è–±–ª–æ–∫–æ +2");
                    } else if (globalRare === 4) {
                        energy -= 2;
                        addLog("ü¶ü –†–µ–¥–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ! –í–∞—Å —É–∫—É—Å–∏–ª –∫–æ–º–∞—Ä -2 —ç–Ω–µ—Ä–≥–∏–∏");
                    }
                }

                // –ö–∞–∂–¥—ã–µ 6 —Ö–æ–¥–æ–≤ –ª—É—Ç–∞–Ω–∏–µ (–Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–µ–¥–∫–∏–º —Å–æ–±—ã—Ç–∏–µ–º)
                if (hod % 6 === 0) {
                    const found = loot[Math.floor(Math.random() * loot.length)];
                    addLog(`üéÅ –í—ã –Ω–∞—à–ª–∏: ${found}`);
                    if (found === "—è–≥–æ–¥—ã +3") energy += 3;
                    else if (found === "–æ—Ä–µ—à–∫–∏ +2") energy += 2;
                    else if (found === "–º–æ—Ö +1") energy += 1;
                }

                hod++;

                addLog(`‚ö° –≠–Ω–µ—Ä–≥–∏—è: ${energy}`);

                // –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–±–µ–¥—ã/–ø–æ—Ä–∞–∂–µ–Ω–∏—è
                if (checkWin()) {
                    endGame(true);
                } else if (checkLoss()) {
                    endGame(false);
                } else if (energy > 20 && (steps < 10 || run < 5)) {
                    addLog("‚ö° –≠–Ω–µ—Ä–≥–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –µ—â—ë –ø–æ—Ö–æ–¥–∏—Ç—å –∏–ª–∏ –ø–æ–±–µ–≥–∞—Ç—å!");
                }

                updateUI();
            }

            function resetGame(difficulty) {
                if (difficulty === '–ª–µ–≥–∫–æ') energy = 20;
                else if (difficulty === '—Å–ª–æ–∂–Ω–æ') energy = 5;
                else energy = 10;

                steps = 0;
                run = 0;
                hod = 1;
                gameActive = true;

                clearLog();
                addLog(`üå≤ –°—Ç–∞—Ä—Ç. –°–ª–æ–∂–Ω–æ—Å—Ç—å: ${difficulty}. –≠–Ω–µ—Ä–≥–∏—è: ${energy}`);
                updateUI();
                setButtonsActive(true);
            }

            function showDifficulty() {
                gameScreen.classList.add('hidden');
                diffScreen.classList.remove('hidden');
                setButtonsActive(false);
            }

            function startGame(difficulty) {
                resetGame(difficulty);
                diffScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
            }

            // –°–æ–±—ã—Ç–∏—è –∫–Ω–æ–ø–æ–∫
            actionWalk.addEventListener('click', () => performAction(1));
            actionRest.addEventListener('click', () => performAction(2));
            actionRun.addEventListener('click', () => performAction(3));
            actionStatus.addEventListener('click', () => performAction(4));
            restartBtn.addEventListener('click', showDifficulty);

            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    startGame(e.target.getAttribute('data-diff'));
                });
            });

            showDifficulty();
        })();
    </script>
</body>
</html>